{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wolftales.github.io/srd-builder/schemas/equipment.schema.json",
  "version": "1.3.0",
  "last_modified": "2025-11-01",
  "title": "SRD 5.1 Equipment Item",
  "description": "Equipment items from SRD 5.1. Core fields describe base equipment, optional fields reserve space for future magic items and internal metadata.",
  "type": "object",
  "required": [
    "id",
    "name",
    "simple_name",
    "category",
    "source",
    "page"
  ],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^item:[a-z0-9_-]+$",
      "description": "Unique identifier using the item: namespace"
    },
    "name": {
      "type": "string",
      "description": "Display name (e.g., 'Longsword')"
    },
    "simple_name": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9\\s-]*$",
      "description": "Lowercase normalized name for indexing and search"
    },
    "aliases": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "description": "Alternative names or search terms for this item (e.g., 'flask' and 'tankard' for 'Flask or tankard')"
    },
    "summary": {
      "type": "string",
      "description": "One-sentence description for tooltips and previews (optional)"
    },
    "category": {
      "type": "string",
      "enum": [
        "weapon",
        "armor",
        "gear",
        "mount",
        "trade_good"
      ],
      "description": "Primary equipment category"
    },
    "sub_category": {
      "type": [
        "string",
        "null"
      ],
      "description": "Category specific detail (e.g., 'light', 'martial_melee')"
    },
    "weapon_type": {
      "type": [
        "string",
        "null"
      ],
      "enum": [
        "melee",
        "ranged",
        null
      ],
      "description": "Weapon attack type"
    },
    "cost": {
      "type": "object",
      "required": [
        "amount",
        "currency"
      ],
      "additionalProperties": false,
      "description": "Item cost in D&D currency",
      "properties": {
        "amount": {
          "type": "number",
          "minimum": 0
        },
        "currency": {
          "type": "string",
          "enum": [
            "cp",
            "sp",
            "ep",
            "gp",
            "pp"
          ]
        }
      }
    },
    "weight_lb": {
      "type": [
        "number",
        "null"
      ],
      "description": "Parsed weight in pounds"
    },
    "weight_raw": {
      "type": [
        "string",
        "null"
      ],
      "description": "Original weight text from the source PDF"
    },
    "damage": {
      "type": [
        "object",
        "null"
      ],
      "required": [
        "dice",
        "type"
      ],
      "additionalProperties": false,
      "description": "Default weapon damage",
      "properties": {
        "dice": {
          "type": "string",
          "pattern": "^\\d+d\\d+(\\+\\d+)?$"
        },
        "type": {
          "type": "string",
          "enum": [
            "bludgeoning",
            "piercing",
            "slashing"
          ]
        }
      }
    },
    "versatile_damage": {
      "type": [
        "object",
        "null"
      ],
      "required": [
        "dice"
      ],
      "additionalProperties": false,
      "description": "Damage when wielded two-handed (versatile weapons)",
      "properties": {
        "dice": {
          "type": "string",
          "pattern": "^\\d+d\\d+$"
        }
      }
    },
    "armor_class": {
      "type": [
        "object",
        "null"
      ],
      "required": [
        "base"
      ],
      "additionalProperties": false,
      "description": "Armor class provided by armor",
      "properties": {
        "base": {
          "type": "integer",
          "minimum": 0
        },
        "dex_bonus": {
          "type": "boolean"
        },
        "max_bonus": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        }
      }
    },
    "strength_req": {
      "type": [
        "integer",
        "null"
      ],
      "minimum": 0,
      "description": "Minimum Strength score required"
    },
    "stealth_disadvantage": {
      "type": [
        "boolean",
        "null"
      ],
      "description": "Whether armor imposes disadvantage on Stealth checks"
    },
    "properties": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Weapon or item properties as raw strings"
    },
    "range": {
      "type": [
        "object",
        "null"
      ],
      "required": [
        "normal"
      ],
      "additionalProperties": false,
      "description": "Range for thrown or ranged weapons",
      "properties": {
        "normal": {
          "type": "integer",
          "minimum": 0
        },
        "long": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        }
      }
    },
    "quantity": {
      "type": [
        "integer",
        "null"
      ],
      "description": "Default quantity packaged with the item as an integer. If null, no default quantity is specified or not applicable. Legacy string formats (e.g., 'bolts (20)', '50 gp') are not supported; only integer values are stored."
    },
    "page": {
      "type": "integer",
      "minimum": 1,
      "description": "Page number in source PDF"
    },
    "source": {
      "type": "string",
      "description": "Source document identifier (e.g., 'SRD 5.1')"
    },
    "variant_of": {
      "type": [
        "string",
        "null"
      ],
      "pattern": "^item:[a-z0-9_-]+$",
      "description": "FUTURE: Base item this entry is derived from"
    },
    "is_magic": {
      "type": "boolean",
      "default": false,
      "description": "FUTURE: Whether the item is magical"
    },
    "rarity": {
      "type": [
        "string",
        "null"
      ],
      "enum": [
        "common",
        "uncommon",
        "rare",
        "very rare",
        "legendary",
        "artifact",
        null
      ],
      "description": "FUTURE: Magic item rarity"
    },
    "requires_attunement": {
      "type": [
        "boolean",
        "null"
      ],
      "description": "FUTURE: Whether the magic item requires attunement"
    },
    "modifiers": {
      "type": "array",
      "description": "FUTURE: Free-form modifier descriptions",
      "items": {
        "type": "string"
      }
    },
    "section": {
      "type": [
        "string",
        "null"
      ],
      "description": "INTERNAL: Section context captured during extraction"
    },
    "table_header": {
      "type": [
        "array",
        "null"
      ],
      "description": "INTERNAL: Column headers detected for the source table",
      "items": {
        "type": "string"
      }
    },
    "row_index": {
      "type": [
        "integer",
        "null"
      ],
      "description": "INTERNAL: Row index within the source table"
    },
    "_meta": {
      "type": "object",
      "description": "INTERNAL: Builder metadata (timestamps, notes)"
    }
  }
}
