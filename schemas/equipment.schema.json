{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wolftales.github.io/srd-builder/schemas/equipment.schema.json",
  "version": "1.1.0",
  "title": "Equipment Item",
  "description": "Schema for individual equipment items (weapons, armor, gear, mounts, trade goods) from the SRD. v1.1.0 covers base SRD items; optional future fields prepare for magic items and variants.",
  "type": "object",
  "required": [
    "id",
    "name",
    "simple_name",
    "category",
    "page",
    "src"
  ],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^item:[a-z0-9_-]+$",
      "description": "Unique identifier in format 'item:<name>'"
    },
    "name": {
      "type": "string",
      "description": "Display name of the equipment item"
    },
    "simple_name": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Lowercase normalized name for indexing and search"
    },
    "summary": {
      "type": "string",
      "description": "One-sentence description for tooltips and previews (optional)"
    },
    "category": {
      "type": "string",
      "enum": [
        "weapon",
        "armor",
        "gear",
        "mount",
        "trade_good"
      ],
      "description": "Primary equipment category (matches actual data categories)"
    },
    "weapon_type": {
      "type": "string",
      "enum": [
        "melee",
        "ranged"
      ],
      "description": "Weapon attack type (weapons only)"
    },
    "armor_category": {
      "type": "string",
      "enum": [
        "light",
        "medium",
        "heavy"
      ],
      "description": "Armor weight class (armor only)"
    },
    "cost": {
      "type": "object",
      "required": [
        "amount",
        "currency"
      ],
      "additionalProperties": false,
      "properties": {
        "amount": {
          "type": "number",
          "minimum": 0,
          "description": "Cost amount"
        },
        "currency": {
          "type": "string",
          "enum": [
            "cp",
            "sp",
            "ep",
            "gp",
            "pp"
          ],
          "description": "Currency type"
        }
      },
      "description": "Item cost"
    },
    "weight": {
      "type": "string",
      "description": "Weight as string from source (e.g., '10 lb.', '1\u00bd lb.') - normalization to number pending"
    },
    "damage": {
      "type": "object",
      "required": [
        "dice",
        "type"
      ],
      "additionalProperties": false,
      "properties": {
        "dice": {
          "type": "string",
          "pattern": "^\\d+d\\d+(\\+\\d+)?$",
          "description": "Damage dice notation (e.g., '1d8', '2d6+3')"
        },
        "type": {
          "type": "string",
          "enum": [
            "bludgeoning",
            "piercing",
            "slashing"
          ],
          "description": "Damage type"
        }
      },
      "description": "Weapon damage (one-handed or default)"
    },
    "versatile_damage": {
      "type": "object",
      "required": [
        "dice"
      ],
      "additionalProperties": false,
      "properties": {
        "dice": {
          "type": "string",
          "pattern": "^\\d+d\\d+(\\+\\d+)?$",
          "description": "Damage dice when wielded two-handed"
        },
        "type": {
          "type": "string",
          "enum": [
            "bludgeoning",
            "piercing",
            "slashing"
          ],
          "description": "Damage type (optional - defaults to same as base damage.type)"
        }
      },
      "description": "Damage when wielded two-handed (versatile weapons). Type defaults to base damage type if omitted."
    },
    "armor_class": {
      "type": "object",
      "required": [
        "base"
      ],
      "additionalProperties": false,
      "properties": {
        "base": {
          "type": "integer",
          "minimum": 0,
          "description": "Base armor class value"
        },
        "dex_bonus": {
          "type": "boolean",
          "description": "Whether armor allows adding Dexterity modifier (currently always false in data)"
        },
        "max_dex_bonus": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum Dexterity bonus that can be added (for medium armor, future)"
        }
      },
      "description": "Armor class provided by armor (armor only)"
    },
    "strength_requirement": {
      "type": "integer",
      "minimum": 0,
      "description": "Minimum Strength score required (heavy armor, future)"
    },
    "stealth_disadvantage": {
      "type": "boolean",
      "description": "Whether armor imposes disadvantage on Stealth checks"
    },
    "properties": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Weapon properties as raw strings (e.g., 'versatile', 'finesse', 'thrown (range 20/60)'). Range extraction to structured range field is pending."
    },
    "range": {
      "type": "object",
      "required": [
        "normal"
      ],
      "additionalProperties": false,
      "properties": {
        "normal": {
          "type": "integer",
          "minimum": 0,
          "description": "Normal range in feet"
        },
        "long": {
          "type": "integer",
          "minimum": 0,
          "description": "Long range in feet (with disadvantage)"
        }
      },
      "description": "Range for ranged/thrown weapons (future - currently in properties array)"
    },
    "quantity": {
      "type": "string",
      "description": "Quantity or packaging info (e.g., 'bolts (20)', '50 gp') - appears on gear/mounts/trade goods"
    },
    "page": {
      "type": "integer",
      "minimum": 1,
      "description": "Page number in source PDF"
    },
    "src": {
      "type": "string",
      "description": "Source document identifier (e.g., 'SRD 5.1')"
    },
    "variant_of": {
      "type": "string",
      "pattern": "^item:[a-z0-9_-]+$",
      "description": "FUTURE: Reference to base item this is a variant of (e.g., magic items referencing mundane base)"
    },
    "is_magic": {
      "type": "boolean",
      "description": "FUTURE: Whether this is a magic item"
    },
    "rarity": {
      "type": "string",
      "enum": [
        "common",
        "uncommon",
        "rare",
        "very rare",
        "legendary",
        "artifact"
      ],
      "description": "FUTURE: Magic item rarity"
    },
    "requires_attunement": {
      "type": "boolean",
      "description": "FUTURE: Whether magic item requires attunement"
    },
    "modifiers": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "type",
          "value"
        ],
        "properties": {
          "type": {
            "type": "string",
            "description": "What the modifier affects (e.g., 'attack', 'damage', 'ac')"
          },
          "value": {
            "type": "integer",
            "description": "Modifier value (typically +1, +2, +3 for magic items)"
          }
        }
      },
      "description": "FUTURE: Numeric modifiers provided by magic items"
    }
  }
}
