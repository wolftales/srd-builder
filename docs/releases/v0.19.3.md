# Release Notes: v0.19.3 - Classes v2.0.0

**Release Date:** 2025-12-23
**Schema Version:** 2.0.0 (classes only)
**Status:** ‚úÖ Non-Breaking - Full Forward Compatibility

---

## Overview

v0.19.3 implements **classes v2.0.0 schema**, completing the v0.19 series migration to v2.0.0 schemas. Unlike monsters, equipment, and spells, the class schema was **already well-designed** with cross-reference IDs and clean nested structures, so this release is primarily a **version alignment** with minimal breaking changes.

**Scope:** This release updates **classes only** and completes the v0.19 series:
- v0.19.0 - Monsters v2.0.0 ‚úÖ
- v0.19.1 - Equipment v2.0.0 ‚úÖ
- v0.19.2 - Spells v2.0.0 ‚úÖ
- v0.19.3 - Classes v2.0.0 ‚úÖ **‚Üê SERIES COMPLETE**

---

## What Changed

### Schema Version Update
- **Schema version:** 1.4.0 ‚Üí 2.0.0
- **last_modified:** 2025-11-03 ‚Üí 2025-12-23
- **Data structure:** No changes (already v2.0.0 compliant)

### Already v2.0.0 Compliant ‚úÖ

The class schema was designed ahead of its time! It already includes all v2.0.0 patterns:

**Cross-Reference IDs:**
```json
{
  "features": [
    "feature:rage",              // ‚úÖ Already using feature: namespace
    "feature:unarmored_defense"
  ],
  "subclasses": [
    "subclass:path_of_the_berserker"  // ‚úÖ Already using subclass: namespace
  ],
  "tables_referenced": [
    "table:proficiency_bonus"   // ‚úÖ Already using table: namespace
  ]
}
```

**Clean Nested Structures:**
```json
{
  "proficiencies": {
    "armor": ["light", "medium"],
    "weapons": ["simple", "martial"],
    "tools": [],
    "skills": {
      "choose": 2,
      "from": ["Athletics", "Intimidation"]
    }
  },
  "spellcasting": {
    "ability": "intelligence",
    "spell_list": "wizard"
  }
}
```

**No Redundant Fields:**
- No summary field (never existed in class schema)
- No duplicate data
- Clean, semantic field names

---

## Non-Breaking Changes

### What Stays the Same

**‚úÖ All data structures unchanged:**
- Feature arrays already use feature IDs
- Subclass arrays already use subclass IDs
- Progression tables already structured properly
- Proficiencies already nested and clean
- Spellcasting already using nested objects

**‚úÖ All field names unchanged:**
- No damage_dice ‚Üí dice migrations needed
- No type ‚Üí type_id additions needed
- All fields already semantic and clear

**‚úÖ Forward compatible:**
- Code written for v1.4.0 works with v2.0.0
- No migration scripts needed
- No data transformations required

### What Changed

**Version metadata only:**
```json
// BEFORE (v1.4.0)
{
  "_meta": {
    "schema_version": "1.4.0"
  }
}

// AFTER (v2.0.0)
{
  "_meta": {
    "schema_version": "2.0.0"
  }
}
```

---

## Migration Guide

### Code Changes Required

#### Option 1: Update Schema Version Check (Recommended)

```python
# OLD: Strict version check
if schema_version == "1.4.0":
    # process classes

# NEW: Accept both versions (forward compatible)
if schema_version in ["1.4.0", "2.0.0"]:
    # process classes - data structure is identical
```

#### Option 2: No Changes Needed

If your code doesn't validate schema versions, **no changes are required**. The data structure is identical between v1.4.0 and v2.0.0.

### Data Migration

**No data migration needed.** Classes v1.4.0 and v2.0.0 use identical data structures. Only the version number changed.

---

## Testing

All tests passing:
- **188 tests passed** (unchanged from v0.19.0/v0.19.1/v0.19.2)
- **19 tests skipped** (unchanged)
- **Class tests:** 14/14 passing
  - test_class_progressions.py: All unit tests passing
  - test_golden_classes.py: Fixture regenerated with v2.0.0 version

**Code quality:**
- ‚úÖ All ruff checks passed
- ‚úÖ All pre-commit hooks passed
- ‚úÖ Schema validation passed for all 12 classes

---

## Datasets

### Classes
- **Total items:** 12 classes
- **Schema version:** 2.0.0
- **File size:** ~150KB (unchanged)

### Changes
1. Schema version updated to 2.0.0
2. Last modified date updated
3. **No data structure changes**

---

## Upgrade Checklist

For consumers upgrading from v1.4.0 to v2.0.0:

- [ ] Update schema validation to accept v2.0.0 (or both 1.4.0 and 2.0.0)
- [ ] **That's it!** No code changes needed if you don't validate versions

---

## Related Releases

- **v0.19.0** - Monsters v2.0.0 (2025-12-23, 317 monsters)
- **v0.19.1** - Equipment v2.0.0 (2025-12-23, 111 items)
- **v0.19.2** - Spells v2.0.0 (2025-12-23, 319 spells)
- **v0.19.3** - Classes v2.0.0 (2025-12-23, 12 classes) **‚Üê This Release**

---

## Technical Details

### Schema Changes
- **schemas/class.schema.json:**
  - Version: 1.4.0 ‚Üí 2.0.0
  - last_modified: 2025-11-03 ‚Üí 2025-12-23
  - **No structural changes**

### Parser Changes
- **No parser changes required** - data structure already v2.0.0 compliant

### Test Updates
- **tests/fixtures/srd_5_1/normalized/classes.json:** Version metadata updated

### Build Output
- **dist/srd_5_1/classes.json:** Rebuilt with v2.0.0 schema version
- All 12 classes validated against schema v2.0.0

---

## Breaking Change Summary

| Change | Type | Impact |
|--------|------|--------|
| Schema version ‚Üí 2.0.0 | Version bump | **None** - data structure identical |

**Migration Effort:** Minimal (< 30 minutes)
- Update version validation logic (if any)
- No code changes needed
- No data transformations needed
- Full forward compatibility

---

## v0.19 Series Complete! üéâ

**All Four Core Datasets Migrated to v2.0.0:**

| Dataset | Version | Items | Key Changes |
|---------|---------|-------|-------------|
| Monsters | v2.0.0 | 317 | Nested ability_scores, simplified fields, pure hit_dice |
| Equipment | v2.0.0 | 111 | damage.type_id cross-references |
| Spells | v2.0.0 | 319 | effects.damage.type_id cross-references |
| Classes | v2.0.0 | 12 | Version alignment (already v2.0.0 compliant) |

**Total Impact:**
- **759 items** updated to v2.0.0 schemas
- **Consistent cross-referencing** across all datasets (feature:, spell:, item:, class:)
- **Clean nested structures** following hybrid flat+nested pattern
- **No redundant fields** (summary removed from monsters/equipment/spells)
- **Simplified field names** (dice/type instead of damage_dice/damage_type)

**Design Principles Established:**
1. **Hybrid Approach:** Flat fields for simple data, nested objects for complex structures
2. **Cross-Reference IDs:** Consistent namespace prefixes (feature:, spell:, item:, etc.)
3. **Semantic Field Names:** Remove redundant prefixes inside nested objects
4. **No Redundancy:** Remove unused/duplicate fields
5. **Schema Evolution:** Major version bumps (v2.0.0) for breaking changes, minor for additions

**What's Next:**
- v0.20.0+ - Post-schema work (APIs, performance, advanced features)
- Additional datasets (magic items, features, lineages) can migrate incrementally
- Consumer libraries can target v2.0.0 as stable baseline

---

## Why Classes Were Different

The class schema was designed later in the project lifecycle after lessons learned from monsters and spells. It incorporated best practices from the start:

1. **Used cross-reference IDs from day one** (feature:, subclass:, table:)
2. **Nested structures were clean** (proficiencies, spellcasting)
3. **No summary field** (learned from monsters that it was redundant)
4. **Semantic field names** (already avoided damage_dice pattern)

This demonstrates the value of the v2.0.0 migration - future schemas can follow these patterns and avoid breaking changes.

---

## Acknowledgments

The v0.19 series represents a major milestone:
- **4 releases in 1 day** (v0.19.0 through v0.19.3)
- **759 items** migrated to v2.0.0 schemas
- **Comprehensive testing** (188 tests passing, 100% coverage of golden fixtures)
- **Backward compatibility considered** at every step

Thank you to all contributors and consumers for your patience during this migration!
