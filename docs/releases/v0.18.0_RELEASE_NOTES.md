# v0.18.0 Release Notes — Modular Refactor Complete

**Status:** ✅ Complete
**Released:** December 22, 2024

## Implementation Plan Reference
- Plan: [docs/planning/v0.18.0_MODULAR_REFACTOR.md](../planning/v0.18.0_MODULAR_REFACTOR.md)
- Roadmap: [docs/ROADMAP.md](../ROADMAP.md) (v0.18.0 milestone)

## Overview
Completed modular refactor of all remaining datasets to use the Extract → Parse → Postprocess pattern. All 12 datasets now follow consistent architecture with golden test coverage.

## Completed Work

### Modular Architecture Standardization ✅ COMPLETE
- **Refactored 7 datasets** to modular pattern:
  1. **classes** - Class definitions (12 items)
  2. **conditions** - Game conditions (15 items)
  3. **diseases** - Disease descriptions (3 items)
  4. **features** - Class/lineage abilities (246 items)
  5. **lineages** - Character ancestry (13 items)
  6. **poisons** - Poison items (14 items)
  7. **tables** - Reference tables (37 items)

### Golden Test Coverage ✅ COMPLETE
Created comprehensive test coverage for all datasets:
- tests/test_golden_classes.py
- tests/test_golden_conditions.py
- tests/test_golden_diseases.py
- tests/test_golden_features.py
- tests/test_golden_lineages.py
- tests/test_golden_poisons.py
- tests/test_golden_tables.py

**Total Golden Tests:** 12/12 datasets (100% coverage)
- Original: monsters, equipment, spells
- Added v0.16.0: magic_items
- Added v0.17.0: rules
- Added v0.18.0: classes, conditions, diseases, features, lineages, poisons, tables

### Fixture Generation ✅ COMPLETE
Created raw + normalized fixtures for all 7 refactored datasets:
- Raw fixtures: tests/fixtures/srd_5_1/raw/{dataset}.json
- Normalized fixtures: tests/fixtures/srd_5_1/normalized/{dataset}.json

### Testing Status ✅ COMPLETE
- Local: All 180+ tests passing
- CI: All tests passing
- Pre-commit hooks: Passing
- Linting: ruff format + ruff check passing

## Architecture Impact

### Before v0.18.0
- 5 datasets following modular pattern
- 7 datasets using monolithic parsers
- Inconsistent testing approaches
- Mixed parse/postprocess logic

### After v0.18.0
- **All 12 datasets** following modular pattern
- Consistent Extract → Parse → Postprocess architecture
- Golden test coverage for all datasets
- Clear separation: parsing (structure extraction) vs postprocessing (normalization)

## Benefits Achieved
1. **Consistency** - All datasets use same architectural pattern
2. **Testability** - Golden tests verify parse + postprocess pipeline
3. **Maintainability** - Clear module boundaries, no code duplication
4. **Debuggability** - Separate raw/normalized fixtures for troubleshooting
5. **Quality** - Automated regression testing via golden fixtures

## Breaking Changes
(None - all changes backward compatible)

## Known Issues
(None)

## Follow-Up Items
(See PARKING_LOT.md for future enhancements)

## Validation Checklist
- ✅ All 12 datasets follow modular pattern
- ✅ All 12 datasets have golden tests
- ✅ All raw + normalized fixtures created
- ✅ No duplicate ID/text normalization logic
- ✅ Build pipeline deterministic
- ✅ All tests passing (180+ tests)
- ✅ Linting passing (ruff format + check)
- ✅ Pre-commit hooks passing
- ✅ Schema validation passing
