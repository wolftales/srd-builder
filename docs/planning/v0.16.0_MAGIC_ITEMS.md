# Planning: v0.16.0 Magic Items

**Status:** ðŸ”„ In Progress
**Date:** December 21, 2025
**Scope:** Extract magic items from SRD 5.1

---

## I. Overview

Extract magic items dataset following the proven paragraph array pattern established in v0.15.x.

**Target:** ~200+ magic items (DMG pages 210-267)

**Key Patterns to Reuse:**
- Font metadata extraction (from spells v0.15.1)
- Paragraph segmentation (from spells/monsters v0.15.x)
- Description arrays (proven pattern)
- Prose extraction framework (from conditions v0.10.0)

---

## II. Investigation Phase

**Questions to Answer:**
1. What's the structure of magic items in the PDF?
   - Header patterns (font, size)
   - Field labels (rarity, attunement, type)
   - Description formatting
   - Table presence?

2. How similar are they to existing datasets?
   - Spells? (descriptions with metadata)
   - Equipment? (base items with variants)
   - Conditions? (prose sections)

3. What's the page range and count?
   - Exact page boundaries
   - Number of items
   - Cross-page items?

**Investigation Tasks:**
- [ ] Analyze font patterns (pages 210-220 sample)
- [ ] Count total items
- [ ] Identify field structure
- [ ] Check for tables vs prose
- [ ] Design schema structure

---

## III. Schema Design

**Initial Thoughts:**

```json
{
  "id": "magic_item:+1_longsword",
  "name": "+1 Longsword",
  "simple_name": "+1 longsword",
  "type": "weapon",
  "rarity": "uncommon",
  "requires_attunement": false,
  "variant_of": "equipment:longsword",
  "description": [
    "You have a +1 bonus to attack and damage rolls made with this magic weapon."
  ]
}
```

**Questions:**
- Separate `magic_items.json` or extend `equipment.json`?
- How to link to base equipment (variant_of field)?
- Cursed items handling?
- Sentient items?

---

## IV. Implementation Plan

**Phase 1: Investigation** (~30m)
- Analyze PDF structure
- Count items
- Design schema

**Phase 2: Extraction** (~1h)
- Create extract_magic_items.py
- Font metadata capture
- Field parsing

**Phase 3: Parsing** (~1h)
- Create parse_magic_items.py
- Paragraph segmentation
- Field mapping

**Phase 4: Validation** (~30m)
- Schema compliance
- Test coverage
- Build integration

**Estimated Total:** 3-4 hours

---

## V. Success Criteria

- [ ] All magic items extracted
- [ ] Schema v1.0.0 defined
- [ ] Description arrays implemented
- [ ] Attunement/rarity fields parsed
- [ ] Base equipment linking (if applicable)
- [ ] All tests passing
- [ ] Build produces magic_items.json

---

## VI. Open Questions

1. **Scope:** Start with just magic weapons/armor or include wondrous items?
2. **Linking:** How to reference base equipment items?
3. **Artifacts:** Include artifacts or defer?
4. **Curses:** How to represent cursed item properties?

---

## VII. Notes

- Leverage v0.15.x paragraph pattern (proven quality)
- Font metadata enables semantic parsing
- Consider equipment.json extension vs separate file
- Pages 210-267 DMG (SRD 5.1)
